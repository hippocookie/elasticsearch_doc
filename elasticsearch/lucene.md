# Apache Lucene
> Lucene是一个高性能、可伸缩的信息搜索(IR)库。Information Retrieval(IR) library.它使你可以为你的应用程序添加索引和搜索能力。但Lucene也仅提供搜索能力，需要根据实际使用自行完成搜索程序的其他模块（例如网页抓取、文档处理、服务器运行、用户界面和管理等）。

 人们初次解除到Lucene时，很容易将它和一些即用型程序搞混淆，比如文件搜索程序、网页搜索器以及网站搜索引擎等。其实这不是Lucene的真面目：Lucene只是一个软件类库，或者一个工具箱，而并不是一个完整的搜索程序。

 ## Lucene核心
 ### 索引过程的核心类
 ####  IndexWriter
 提供针对索引文件的写入操作，但不能用于读取或搜索索引，IndexWriter需要开率一定空间来存储索引，该功能可以由Directory完成。
 #### Directory
描述了Lucene索引的存放位置，它是一个抽象类，它的子类负责具体制定索引的存储路径。
 #### Analyzer
 文本文件在被索引之前，需要经过Analyzer（分词器）处理，它负责从被索引文本文件中提取语汇单元，并提出剩下的无用信息，如果被索引内容不是纯文本文件，那就需要先将其传唤为文本文档。
#### Document
代表一些域（Field）的集合，文档的域代表文档或者和文档相关的一些元数据。Document对象结构为一个包含多个Field对象的容器，Field是指包含能被索引的文本内容的类。
#### Field
索引中的每个文档都包含一个或多个不同命名的域，这些域包含在Field类中。

### 搜索过程的核心类
#### IndexSearcher
用于搜索由IndexWriter类创建的索引，可将其看所一个以只读方式打开索引的类，需要利用Directory实例来获取创建的索引。
#### Term
搜索功能的基本单元，与Field对象类似，Term对象包含一堆字符串元素：域名和单词，由于Term对象是由Lucene内部创建的，我们并不需要在索引阶段详细了解它们。
```java
// 搜索contents域中包含单词lucene的前10个文档，并按降序排列
Query q = new TermQuery(new Term("contents", "lucene"));
TopDocs hits = searcher.search(q, 10);
```
#### Query
Lucene含有许多具体的Query子类，如TermQuery、BooleanQuery、PhraseQuery等。
#### TermQuery
最基本的查询类型，用来指定域中包含特定项的文档。
#### TopDocs
简单的指针容器，一般指向前N个排名的搜索结果。

## 构建索引
### 搜索内容进行建模
#### 文档和域
文档时Lucene索引和搜索的原子单位，文档为包含一个或多个域的容器，而域则一次包含真正被搜索内容，每个域都有一个标识名称，该名称为一个文本值或二进制值，当你将文档加入到索引中时，可以通过一系列选项类控制Lucene的行为。

#### 灵活的架构
与数据库不同的是，Lucene没有一个确定的全局模式，也就是说，加入索引的每个文档都是独立的，它与此前加入的文档完全没有关系：它可以包含任意的域，以及任意的索引、存储和向量操作选项，它也不必包含于其他文档相同的域，甚至可以与其他文档内容相同，仅相关操作选项有所区别。

#### Denormalization
为解决文档真实结构和Lucene表示能力之间的不匹配问题，我们需要对递归文档结构进行反向规格化操作。

### 索引过程


